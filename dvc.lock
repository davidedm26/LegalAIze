schema: '2.0'
stages:
  train:
    cmd: python train_model.py
    deps:
    - path: data/
      hash: md5
      md5: 6ffbaaad7b4ac6e1afabed19a80b2560.dir
      size: 0
      nfiles: 1
    - path: params.yaml
      hash: md5
      md5: 190181a863f1db18654d6e70e28e3e2c
      size: 135
    - path: train_model.py
      hash: md5
      md5: 154c4caeef74803e12241151c920014f
      size: 2804
    params:
      params.yaml:
        model:
          max_depth: 5
          n_estimators: 120
          random_state: 42
        train:
          test_size: 0.2
          random_state: 42
    outs:
    - path: metrics.json
      hash: md5
      md5: e53fffc12e23345b3fedebbd08b070b1
      size: 40
    - path: models/model.pkl
      hash: md5
      md5: 2c2c99e7ed9548fa2afc1a2d7bb8b90c
      size: 200977
  ingest:
    cmd: python data_ingestion.py
    deps:
    - path: data/ai_act.pdf
      hash: md5
      md5: a31da461b015738b42cc2f719a9acee4
      size: 2583319
    - path: data/iso.pdf
      hash: md5
      md5: 2ae5af2fc9eea16d8d0d3144b57ca428
      size: 2646955
    - path: data_ingestion.py
      hash: md5
      md5: 2a0ccba225633e879f15745e1ab4225c
      size: 2998
    - path: params.yaml
      hash: md5
      md5: 00b1a40346b62c3e5e97f1cd454a99e8
      size: 359
    params:
      params.yaml:
        ingestion:
          chunk_size: 1000
          chunk_overlap: 200
          raw_data_dir: data
          processed_data_dir: data/processed
    outs:
    - path: data/processed/chunks.json
      hash: md5
      md5: a171e7ace8948c8bfea4d892108e5651
      size: 939870
  vectorize:
    cmd: python vectorize_data.py
    deps:
    - path: data/processed/chunks.json
      hash: md5
      md5: 43c70c70a29688b903aacbd6dd84a071
      size: 1382558
    - path: params.yaml
      hash: md5
      md5: 00b1a40346b62c3e5e97f1cd454a99e8
      size: 359
    - path: vectorize_data.py
      hash: md5
      md5: 7bfbd2575daecf10038aa0343daaf1f8
      size: 2610
    params:
      params.yaml:
        vectorization:
          model_name: all-MiniLM-L6-v2
          collection_name: legal_docs
          qdrant_host: localhost
          qdrant_port: 6333
          vector_index_path: data/processed/vector_index
    outs:
    - path: data/processed/vector_index
      hash: md5
      md5: 0fd444bf6c034ed1645b0b600511705d.dir
      size: 7569967
      nfiles: 4
